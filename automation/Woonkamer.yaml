#todo fix this shit
- alias: Dim lights when apple tv playing
  trigger:
    - platform: state
      entity_id: media_player.apple_tv
      from: 'paused'
      to: 'playing'
    - platform: state
      entity_id: media_player.apple_tv
      from: 'idle'
      to: 'playing'
    - platform: state
      entity_id: media_player.philips_tv
      from: 'off'
      to: 'on'
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: media_player.philips_tv
        state: 'on'
      - condition: template
        value_template: '{{states.media_player.apple_tv.state == "playing"}}'
      - condition: state
        entity_id: light.bank
        state: 'on'
  action: 
    service: light.turn_on
    entity_id:
      - light.televisie
      - light.bank
    data:
      transition: 4
      brightness: 26

- alias: undim lights when apple tv not playing
  trigger:
    - platform: state
      entity_id: media_player.apple_tv
      from: 'playing'
      to: 'paused'
    - platform: state
      entity_id: media_player.philips_tv
      from: 'on'
      to: 'off'
    - platform: state
      entity_id: media_player.apple_tv
      from: 'playing'
      to: 'idle'
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: light.bank
        state: 'on'
  action: 
    service: light.turn_on
    entity_id:
      - light.televisie
      - light.bank
    data_template:
      brightness: '{{states.light.eettafel.attributes.brightness}}'
    data:
      transition: 4

- alias: Dim lights when plex plays
  trigger:
    platform: state
    entity_id: media_player.plex_playstation_4
    to: 'playing'
  condition:
    condition: state
    entity_id: light.bank
    state: 'on'
  action: 
    service: light.turn_on
    entity_id:
      - light.televisie
      - light.bank
    data:
      transition: 4
      brightness: 26

- alias: undim lights when plex stops playing
  trigger:
    platform: state
    entity_id: media_player.plex_playstation_4
    from: 'playing'
  condition:
    condition: state
    entity_id: light.bank
    state: 'on'
  action: 
    service: light.turn_on
    entity_id:
      - light.televisie
      - light.bank
    data:
      transition: 4
    data_template:
      brightness: '{{states.light.eettafel.attributes.brightness}}'

- alias: reset robbie
  trigger:
    platform: time
    at: '04:59:00'
  action:
    service: input_boolean.turn_off
    entity_id: input_boolean.robbie


